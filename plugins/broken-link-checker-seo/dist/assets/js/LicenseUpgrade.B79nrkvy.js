import{ad as v,aa as L,u as P,_ as d,m as U,z as k}from"./index.MAPGMl_Z.js";const y=r=>(r||document.location.search).replace(/(^\?)/,"").split("&").map((function(e){return e=e.split("="),this[e[0]]=e[1],this}).bind({}))[0];let c=!1,n=null,m;const f=r=>{m(r,n,f)},W=(r,e,t,i,o,a,s,w,l)=>{let u=50,p=50;if(o){const _=window.outerHeight;u=(window.innerWidth-t)/2,p=(_-50-i)/2}let h=`location=0,status=0,width=${t},height=${i},left=${u},top=${p}`;(e==="_blank"||e==="_self")&&(h=""),(!n||n.closed)&&(n=window.open(r,e,h)),n&&n.focus(),c=window.setInterval(()=>I(a,s,w,l),500),l&&(m=l,window.addEventListener("message",f,!1))},I=(r,e,t,i=!1)=>{if(i){if(!n){window.removeEventListener("message",f,!1),window.clearInterval(c),t();return}n.closed&&(n=null,window.removeEventListener("message",f,!1),window.clearInterval(c),t());return}let o={};try{o=y(n.location.search)}catch{}const a=[];if(r.forEach(s=>{if(o[s]!==void 0&&o[s]){a.push(!0);return}a.push(!1)}),a.every(s=>s))return window.clearInterval(c),e(o).then(()=>{n.close(),n=null,t(!0)});if(!n){window.clearInterval(c),t();return}n.closed&&(n=null,window.clearInterval(c),t())},g="aioseo-broken-link-checker",O=()=>{const r=v(),e=L(),t=P(),i={toUnlock:d("To unlock a higher quota, consider",g),upgradingToPro:d("upgrading to Pro",g),upgradingToHigherPlan:d("upgrading to a higher plan",g)},o=l=>{if(r.showUpgradePopup=!1,l.success)return r.activateLicense(e.internalOptions.internal.license.licenseKey)},a=()=>{r.showUpgradePopup=!1},s=(l="broken-links-report",u="external-link")=>{if(r.showUpgradePopup.licenseUpgrade)return;r.showUpgradePopup=!0;const p=k.utmUrl(l,u,"blc-pricing-upgrade?license="+e.internalOptions.internal.license.licenseKey)+"&url="+btoa(t.aioseoBrokenLinkChecker.urls.connect);W(p,d("Upgrade Your Broken Link Checker License",g),650,800,!0,["success"],o,a)},w=U(()=>e.internalOptions.internal.license.level&&e.internalOptions.internal.license.level.toLowerCase()==="free"?i.upgradingToPro:i.upgradingToHigherPlan);return{openLicenseUpgradePopup:s,strings:i,upgradeAnchor:w,completedLicenseUpgrade:o,closedLicenseUpgrade:a}};export{W as p,O as u};
